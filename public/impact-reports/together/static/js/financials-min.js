$(function(){var a=$(window),e=($("body"),$(".js-fin-slider"));e.on("init",function(){j()}),e.slick({infinite:!1,adaptiveHeight:!0}),e.find(".slick-active").focus();var t=$(".js-story-progress"),o=$(".js-story-progress__label");e.on("beforeChange",function(a,e,r,n){var l=n/(e.slideCount-1)*100;t.css("transform","translateX( "+l+"%").attr("aria-valuenow",l),o.text(l+"% completed")}),e.on("afterChange",function(e,t,o,r){j(),function(){var a=$(".js-fin-chart-ran");if(a.length){var e=a.data("chart");"fin-chart-endow"===e?n.destroy():"fin-chart-invest"===e?(c.destroy(),g.removeClass("js-legend-show")):"fin-chart-perform"===e?h.destroy():"fin-chart-transfer"===e&&(v.destroy(),w.removeClass("js-legend-show")),a.removeClass("js-fin-chart-ran")}var t=$(".slick-active.js-section-story__chart");if(t.length){var e=t.data("chart");"fin-chart-endow"===e?n=new Chart(l,{type:"bar",data:s,options:i}):"fin-chart-invest"===e?(c=new Chart(d,{type:"doughnut",data:f,options:u}),g.html(c.generateLegend())):"fin-chart-perform"===e?h=new Chart(p,{type:"bar",data:b,options:m}):"fin-chart-transfer"===e&&(v=new Chart(y,{type:"doughnut",data:C,options:k}),w.html(v.generateLegend())),t.addClass("js-fin-chart-ran")}}(),a.scrollTop()>0&&$("html, body").animate({scrollTop:0},10)});var r="#000000";Chart.defaults.global.defaultFontFamily="Roboto",Chart.defaults.global.defaultFontStyle="bold",Chart.defaults.global.legend.labels.usePointStyle=!0;var n,l=$("#fin-chart-endow"),s={labels:["FY15","FY16","FY17","FY18","FY19"],color:r,datasets:[{data:[1.09,1.06,1.22,1.36,1.45],backgroundColor:["#595955","#7c7e7f","#7b6f4b","#cfb87c","#d6cca6"],hoverBackgroundColor:["#595955","#7c7e7f","#7b6f4b","#cfb87c","#d6cca6"],borderWidth:0,hoverBorderWidth:0}]},i={responsive:!0,layout:{padding:{top:30}},plugins:{datalabels:{align:"end",anchor:"end",color:r,font:function(a){return{size:a.chart.width<400?12:18}},formatter:function(a,e){return a>1?"$"+a+"B":"$"+a.toString().slice(2)+"M"}}},legend:{display:!1},tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:14,fontColor:r}}],yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{display:!1,min:0,max:1.5}}]}};var c,d=$("#fin-chart-invest"),f={labels:["Fixed income and cash","Real assets","Global hedge funds","Global private capital","Global public equities"],color:r,datasets:[{data:[5,8,13,24,50],backgroundColor:["#595955","#7c7e7f","#7b6f4b","#cfb87c","#d6cca6"],hoverBackgroundColor:["#595955","#7c7e7f","#7b6f4b","#cfb87c","#d6cca6"],borderWidth:0,hoverBorderWidth:0}]},u={responsive:!0,layout:{padding:{top:30,right:55,bottom:100,left:55}},cutoutPercentage:50,animation:{animateScale:!0,animateRotate:!0,onComplete:function(){g.addClass("js-legend-show")}},tooltips:{enabled:!1},legend:{display:!1},legendCallback:function(a){var e=document.createElement("ul"),t=a.data.datasets[0].backgroundColor;return a.data.labels.forEach(function(a,o){e.innerHTML+='<li><span style="background-color: '+t[o]+'"></span>'+a+"</li>"}),e.outerHTML},plugins:{datalabels:{align:"end",anchor:"end",color:r,font:function(a){return{size:a.chart.width<400?14:22}},formatter:function(a,e){return a+"%"}}}},g=$(".js-chart-invest-legend");var h,p=$("#fin-chart-perform"),b={labels:["3 Year","5 Year","10 Year"],color:r,datasets:[{label:"LTIP",backgroundColor:"#cfb87c",hoverBackgroundColor:"#cfb87c",data:[10.8,6.5,9.2]},{label:"Policy Benchmark",backgroundColor:"#7c7e7f",hoverBackgroundColor:"#7c7e7f",data:[10,5.8,9.6]}]},m={responsive:!0,layout:{padding:{top:30}},legend:{display:!0,position:"bottom",labels:{fontSize:18,padding:20,boxWidth:50}},tooltips:{enabled:!1},plugins:{datalabels:{align:"end",anchor:"end",color:r,font:function(a){return{size:a.chart.width<400?14:20}},formatter:function(a,e){return a+"%"}}},scales:{xAxes:[{categoryPercentage:.8,barPercentage:1,gridLines:{display:!1}}],yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{display:!1,min:0,max:13}}]}};var v,y=$("#fin-chart-transfer"),C={labels:["Academic support","Research","Scholarships","Advancement support","Capital projects","Chairs, professorships and other faculty support","Public service, administration, library and other support","Athletics"],color:r,datasets:[{data:[24,19,14,13,11,10,8,1],backgroundColor:["#cfb87c","#595955","#7b6f4b","#7c7e7f","#d6cca6","#354463","#9ea1a2",r],hoverBackgroundColor:["#cfb87c","#595955","#7b6f4b","#7c7e7f","#d6cca6","#354463","#9ea1a2",r],borderWidth:0,hoverBorderWidth:0}]},k={responsive:!0,layout:{padding:{top:30,right:55,bottom:150,left:55}},cutoutPercentage:50,animation:{animateScale:!0,animateRotate:!0,onComplete:function(){w.addClass("js-legend-show")}},tooltips:{enabled:!1},legend:{display:!1},legendCallback:function(a){var e=document.createElement("ul"),t=a.data.datasets[0].backgroundColor;return a.data.labels.forEach(function(a,o){e.innerHTML+='<li><span style="background-color: '+t[o]+'"></span>'+a+"</li>"}),e.outerHTML},plugins:{datalabels:{align:"end",anchor:"end",color:r,font:function(a){return{size:a.chart.width<400?14:22}},formatter:function(a,e){return a+"%"}}}},w=$(".js-chart-transfer-legend");function j(){$(".slick-active .js-img-prog-container").each(function(){var a=$(this),e=a.find(".js-img-prog-low"),t=new Image;t.src=e.attr("src"),t.onload=function(){e.addClass("js-img-prog-loaded")};var o=new Image;o.src=e.data("large"),o.alt=e.attr("alt"),o.onload=function(){o.className="js-img-prog-high js-img-prog-loaded"},o.style="position:absolute",a.append(o),a.removeClass("js-img-prog-container")})}});